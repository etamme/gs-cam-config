<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="704" height="576"></canvas>
    <script>
      var x1,x2,y1,y2=null;

      function getMousePos(canvas, evt) {
        var rect = canvas.getBoundingClientRect();
        return {
          x: evt.clientX - rect.left,
          y: evt.clientY - rect.top
        };
      }

      function drawRect(canvas, x1,y1,x2,y2) {
        var tx,ty,width,height;
        if(x1>x2 && y1>y1){
          tx=x1;
          ty=y1;
          x1=x2;
          y1=y2;
          x2=tx;
          y2=ty;
        }
        width=x2-x1;
        height=y2-y1;
        var context = canvas.getContext('2d');
        context.rect(x1, y1, width, height);
        context.stroke();
      }

      var canvas = document.getElementById('myCanvas');

      canvas.addEventListener('mousedown', function(evt) {
        var mousePos = getMousePos(canvas, evt);
        if (x1 == null && y1==null){
          x1=mousePos.x;
          y1=mousePos.y;
        } else {
          x2=mousePos.x;
          y2=mousePos.y;
          drawRect(canvas, x1,y1,x2,y2);
          x1=null;
          y1=null;
          x2=null;
          y2=null;
        }

        var message = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;
        console.log('Mouse position: ' + mousePos.x + ',' + mousePos.y);
      }, false);

      var context = canvas.getContext('2d');

      var x = 0;
      var y = 0;
      var width = 704;
      var height = 576;
      var imageObj = new Image();

      imageObj.onload = function() {
        context.drawImage(imageObj, x, y, width, height);
      };

      //imageObj.src = "http://192.168.1.15/snapshot/view0.jpg";
      //alley cam
      //imageObj.src = "http://i.imgur.com/0PYfvhv.jpg";
      //office cam
      imageObj.src = "http://i.imgur.com/6AMlEIo.png";

    </script>
  </body>
</html>
